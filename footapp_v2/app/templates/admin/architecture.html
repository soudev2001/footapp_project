{% extends "base.html" %}
{% block title %}Architecture du SystÃ¨me - FootApp{% endblock %}

{% block content %}
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>

<div class="max-w-[1600px] mx-auto px-6 py-10">
    <div class="flex justify-between items-center mb-10">
        <div>
            <h1 class="text-4xl font-black text-white italic">ARCHITECTURE <span class="text-primary-400">SYSTÃˆME</span>
            </h1>
            <p class="text-gray-400 mt-2">Visualisation des flux et de la structure de l'application FootApp V2</p>
        </div>
        <button onclick="window.print()"
            class="btn-primary px-6 py-3 rounded-2xl font-black text-xs uppercase tracking-widest flex items-center gap-2">
            <i class="fa-solid fa-print"></i> IMPRIMER LE DIAGRAMME
        </button>
    </div>

    <!-- Stats Overview -->
    <div class="grid grid-cols-2 md:grid-cols-4 gap-6 mb-10">
        <div class="card p-6 border-l-4 border-primary-500">
            <p class="text-[10px] font-black text-gray-500 uppercase tracking-widest mb-2">Modules Web</p>
            <p class="text-2xl font-black text-white italic">03</p>
        </div>
        <div class="card p-6 border-l-4 border-red-500">
            <p class="text-[10px] font-black text-gray-500 uppercase tracking-widest mb-2">Modules Admin</p>
            <p class="text-2xl font-black text-white italic">02</p>
        </div>
        <div class="card p-6 border-l-4 border-amber-500">
            <p class="text-[10px] font-black text-gray-500 uppercase tracking-widest mb-2">Modules Club</p>
            <p class="text-2xl font-black text-white italic">01</p>
        </div>
        <div class="card p-6 border-l-4 border-green-500">
            <p class="text-[10px] font-black text-gray-500 uppercase tracking-widest mb-2">Modules App</p>
            <p class="text-2xl font-black text-white italic">12</p>
        </div>
    </div>

    <div class="card p-10 bg-surface-900 border-white/5 shadow-2xl overflow-x-auto relative min-h-[800px]">
        <div class="absolute inset-0 bg-white/[0.02] pointer-events-none"></div>
        <div class="mermaid relative z-10 flex justify-center">
            stateDiagram-v2
            direction TB

            %% --- STYLES ---
            classDef default fill:transparent,stroke:#3b82f6,color:#fff,stroke-width:2px;
            classDef public fill:#1e1b4b,stroke:#3b82f6,color:#fff,stroke-width:2px;
            classDef auth fill:#2e1065,stroke:#a855f7,color:#fff,stroke-width:2px;
            classDef admin fill:#450a0a,stroke:#ef4444,color:#fff,stroke-width:2px;
            classDef club fill:#064e3b,stroke:#10b981,color:#fff,stroke-width:2px;
            classDef mobile fill:#0f172a,stroke:#64748b,color:#fff,stroke-width:2px;

            %% --- WEB PUBLIC ---
            state "ðŸŒ Site Vitrine" as WebGroup {
            direction LR
            Index : ðŸ  Accueil
            PublicClub : ðŸ“¢ Vue Fan/Club
            Ranking : ðŸ† Classement
            }
            class WebGroup public

            %% --- AUTHENTIFICATION ---
            state "ðŸ” Authentification" as AuthGroup {
            direction TB
            Login : ðŸ”‘ Connexion
            Register : ðŸ“ Inscription
            Forgot : â“ Mot de passe oubliÃ©
            }
            class AuthGroup auth

            %% --- ADMIN SAAS ---
            state "ðŸš€ Super Admin (SaaS)" as AdminGroup {
            AdminPanel : ðŸ›  Panel Admin
            Invoice : ðŸ“„ Facture
            Architecture : ðŸ› Architecture
            }
            class AdminGroup admin

            %% --- CLUB BACK OFFICE ---
            state "ðŸ¢ Club Back-Office" as ClubGroup {
            Dashboard : ðŸ“Š Tableau de Bord
            MatchCenter : âš½ Match Center
            Tactics : ðŸ“‹ Tactique Board
            }
            class ClubGroup club

            %% --- APP MOBILE ---
            state "ðŸ“± Application Mobile" as AppGroup {
            direction TB
            AppHome : ðŸ  App Accueil

            state "Social" as SocialSection {
            Feed : ðŸ“° Fil d'Actu
            CreatePost : âœï¸ CrÃ©er Post
            }

            state "Messagerie" as ChatSection {
            ChatInbox : ðŸ’¬ Messagerie
            ChatDetail : ðŸ—£ Conversation
            }

            state "Gestion Sportive" as SportSection {
            Calendar : ðŸ“… Calendrier
            Attendance : âœ… PrÃ©sences
            CreateEvent : âž• CrÃ©er Event
            }

            state "Profil & Admin" as ProfileSection {
            Profile : ðŸ‘¤ Profil
            Docs : ðŸ“„ Documents
            Settings : âš™ï¸ ParamÃ¨tres
            }
            }
            class AppGroup mobile

            %% --- LIENS & LOGIQUE ---
            Index --> Login
            Index --> Register
            Index --> PublicClub
            PublicClub --> Ranking

            Login --> AdminPanel
            Login --> Dashboard
            Login --> AppHome

            Dashboard --> Index : PrÃ©visualiser
            Dashboard --> Invoice : Facturation

            AppHome --> Feed
            AppHome --> ChatInbox
            AppHome --> Calendar

            ChatInbox --> ChatDetail

            Feed --> CreatePost
            Calendar --> MatchCenter
            Calendar --> CreateEvent

            ProfileSection --> Docs
            ProfileSection --> Settings
        </div>
    </div>
</div>

<style>
    /* Customize Mermaid Colors for Dark Theme */
    .mermaid .node rect,
    .mermaid .node circle,
    .mermaid .node polygon,
    .mermaid .node path {
        fill: #1e293b !important;
        stroke: #3b82f6 !important;
    }

    .mermaid .label text {
        fill: #fff !important;
        font-family: 'Inter', sans-serif !important;
        font-weight: 700 !important;
    }

    .mermaid .edgePath .path {
        stroke: #475569 !important;
    }

    .mermaid .marker {
        fill: #475569 !important;
        stroke: #475569 !important;
    }
</style>

<script>
    mermaid.initialize({
        startOnLoad: true,
        theme: 'dark',
        themeVariables: {
            fontFamily: 'Inter',
            primaryColor: '#3b82f6',
            textColor: '#fff',
            mainBkg: '#0f172a',
            nodeBorder: '#3b82f6',
            clusterBkg: 'rgba(59, 130, 246, 0.05)',
            clusterBorder: 'rgba(59, 130, 246, 0.2)'
        }
    });
</script>
{% endblock %}