{% extends "base.html" %}
{% block title %}Evolution HUB - FootLogic Elite{% endblock %}

{% block content %}
<div class="page-enter max-w-5xl mx-auto px-4 py-8">
    <!-- Header Hero -->
    <div class="glass p-10 rounded-[40px] border-white/5 mb-10 relative overflow-hidden">
        <div class="absolute inset-0 bg-gradient-to-br from-primary-500/10 via-transparent to-amber-500/10"></div>
        <div class="relative z-10 flex flex-col md:flex-row justify-between items-center gap-8">
            <div class="flex items-center gap-6">
                <div class="relative">
                    <div class="w-24 h-24 gradient-primary rounded-[32px] p-1 shadow-2xl">
                        <img src="{{ player.photo or 'https://ui-avatars.com/api/?name=' + player.name + '&background=1f2937&color=fff' }}"
                            class="w-full h-full object-cover rounded-[28px]">
                    </div>
                    <div
                        class="absolute -bottom-2 -right-2 w-10 h-10 glass border border-white/10 rounded-2xl flex items-center justify-center font-black text-xs text-primary-400">
                        {{ player.jersey_number or '--' }}
                    </div>
                </div>
                <div>
                    <h1 class="text-4xl font-black italic uppercase tracking-tight leading-none mb-2">{{ player.name }}
                    </h1>
                    <div class="flex items-center gap-3">
                        <span
                            class="px-3 py-1 rounded-full bg-white/5 text-[10px] font-black text-white/40 uppercase tracking-widest border border-white/5">
                            {{ player.position }}
                        </span>
                        <span class="text-xs font-bold text-primary-400 italic">Elite Prospect</span>
                    </div>
                </div>
            </div>
            <div class="flex gap-4">
                <div class="text-center px-6 py-4 glass rounded-3xl border-white/5">
                    <p class="text-[9px] font-black text-white/20 uppercase tracking-widest mb-1">Global Rating</p>
                    <p class="text-3xl font-black text-white italic">78</p>
                </div>
                <div class="text-center px-6 py-4 glass rounded-3xl border-white/5">
                    <p class="text-[9px] font-black text-white/20 uppercase tracking-widest mb-1">Potentiel</p>
                    <p class="text-3xl font-black text-primary-400 italic">85</p>
                </div>
            </div>
        </div>
    </div>

    <div class="grid lg:grid-cols-3 gap-10">
        <!-- Technical Analysis -->
        <div class="lg:col-span-2 space-y-10">
            <div class="glass p-8 rounded-[40px] border-white/5 relative overflow-hidden">
                <h2 class="text-xl font-black uppercase tracking-widest mb-10 flex items-center gap-3">
                    <i class="fa-solid fa-chart-radar text-primary-400"></i>
                    Attributs Techniques
                </h2>

                <div class="grid md:grid-cols-2 gap-12 items-center">
                    <div class="relative aspect-square max-w-[300px] mx-auto">
                        <!-- Radar Chart Placeholder -->
                        <div class="absolute inset-0 flex items-center justify-center">
                            <div
                                class="w-full h-full border-2 border-white/5 rounded-full flex items-center justify-center">
                                <div
                                    class="w-2/3 h-2/3 border-2 border-white/5 rounded-full flex items-center justify-center">
                                    <div class="w-1/3 h-1/3 border-2 border-white/5 rounded-full"></div>
                                </div>
                            </div>
                            <svg class="absolute inset-0 w-full h-full" viewBox="0 0 100 100">
                                <polygon points="50,15 85,35 75,75 35,85 15,50" fill="rgba(132, 204, 22, 0.2)"
                                    stroke="#84cc16" stroke-width="1" />
                            </svg>
                        </div>
                    </div>

                    <div class="space-y-6">
                        {% set ratings = player.technical_ratings or {
                        'VIT': 82, 'TIR': 75, 'PAS': 78, 'DRI': 80, 'DEF': 45, 'PHY': 70
                        } %}
                        {% for label, val in ratings.items() %}
                        <div>
                            <div class="flex justify-between text-[10px] font-black uppercase tracking-widest mb-2">
                                <span class="text-white/40">{{ label }}</span>
                                <span class="text-white">{{ val }}</span>
                            </div>
                            <div class="h-1.5 w-full bg-white/5 rounded-full overflow-hidden">
                                <div class="h-full gradient-primary" style="width: {{ val }}%"></div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>

            <!-- Evolutions & Evaluation -->
            <div class="space-y-6">
                <h2 class="text-xl font-black uppercase tracking-widest px-4">Évaluations du Staff</h2>
                <div class="space-y-4">
                    {% if player.evaluations %}
                    {% for eval in player.evaluations|reverse %}
                    <div class="glass p-6 rounded-[32px] border-white/5 group hover:bg-white/5 transition-all">
                        <div class="flex justify-between items-start mb-4">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 gradient-accent rounded-xl flex items-center justify-center">
                                    <i class="fa-solid fa-user-tie text-black"></i>
                                </div>
                                <div>
                                    <p class="text-xs font-black uppercase tracking-widest">{{ eval.coach_name or 'Staff
                                        Technique' }}</p>
                                    <p class="text-[9px] text-white/20">{{ eval.date.strftime('%d %b %Y') if eval.date
                                        else '--' }}</p>
                                </div>
                            </div>
                            <span
                                class="px-3 py-1 rounded-lg bg-primary-500/10 text-primary-400 text-[10px] font-black">
                                {{ eval.type or 'Match' }}
                            </span>
                        </div>
                        <p class="text-sm text-white/60 leading-relaxed italic">"{{ eval.comment }}"</p>
                    </div>
                    {% endfor %}
                    {% else %}
                    <div class="glass p-10 rounded-[32px] border-white/5 text-center">
                        <i class="fa-solid fa-comment-slash text-3xl text-white/5 mb-4 block"></i>
                        <p class="text-[10px] font-black text-white/20 uppercase tracking-widest">Aucune évaluation
                            récente</p>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Sidebar: Physical & Progress -->
        <div class="space-y-10">
            <div class="glass p-8 rounded-[40px] border-white/5">
                <h3 class="text-sm font-black uppercase tracking-widest mb-8">Profil Physique</h3>
                <div class="space-y-8">
                    <div class="flex items-end justify-between">
                        <div>
                            <p class="text-[9px] font-black text-white/20 uppercase tracking-widest mb-1">Poids</p>
                            <p class="text-2xl font-black text-white italic">{{ player.weight or '--' }} <span
                                    class="text-xs text-white/20 not-italic">kg</span></p>
                        </div>
                        <div class="h-10 w-24 bg-white/5 rounded-xl flex items-end p-2 gap-1">
                            <div class="w-full bg-primary-500/20 h-2/3 rounded-sm"></div>
                            <div class="w-full bg-primary-500/40 h-3/4 rounded-sm"></div>
                            <div class="w-full bg-primary-500 h-full rounded-sm"></div>
                        </div>
                    </div>
                    <div class="flex items-end justify-between">
                        <div>
                            <p class="text-[9px] font-black text-white/20 uppercase tracking-widest mb-1">Taille</p>
                            <p class="text-2xl font-black text-white italic">{{ player.height or '--' }} <span
                                    class="text-xs text-white/20 not-italic">cm</span></p>
                        </div>
                        <i class="fa-solid fa-ruler-vertical text-white/10 text-2xl mb-1"></i>
                    </div>
                </div>
            </div>

            <!-- Training Stats -->
            <div class="glass p-8 rounded-[40px] border-white/5 bg-gradient-to-b from-transparent to-primary-500/5">
                <h3 class="text-sm font-black uppercase tracking-widest mb-8">Assiduité</h3>
                <div class="relative w-32 h-32 mx-auto mb-8">
                    <svg class="w-full h-full" viewBox="0 0 100 100">
                        <circle cx="50" cy="50" r="45" fill="none" stroke="rgba(255,255,255,0.05)" stroke-width="8" />
                        <circle cx="50" cy="50" r="45" fill="none" stroke="#84cc16" stroke-width="8"
                            stroke-dasharray="210 282" stroke-linecap="round" />
                    </svg>
                    <div class="absolute inset-0 flex flex-col items-center justify-center">
                        <span class="text-2xl font-black italic leading-none">92%</span>
                    </div>
                </div>
                <p class="text-[10px] text-center text-white/40 font-bold uppercase tracking-widest">Taux de présence
                    aux entraînements</p>
            </div>
        </div>
    </div>
</div>

<style>
    @keyframes float {

        0%,
        100% {
            transform: translateY(0);
        }

        50% {
            transform: translateY(-10px);
        }
    }

    .animate-float {
        animation: float 4s ease-in-out infinite;
    }
</style>
{% endblock %}