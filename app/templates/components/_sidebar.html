<!-- Sidebar Overlay -->
<div id="sidebar-overlay" class="sidebar-overlay"></div>

<!-- Sidebar Component -->
<aside id="sidebar" class="sidebar">
    <!-- Sidebar Header -->
    <div class="sidebar-header">
        <a href="/" class="sidebar-logo">
            <div class="sidebar-logo-icon gradient-primary">
                <i class="fa-solid fa-futbol text-black"></i>
            </div>
            <div class="sidebar-logo-text">
                <span class="sidebar-logo-title">FOOT<span class="text-primary-500">LOGIC</span></span>
                <span class="sidebar-logo-subtitle">SaaS Management</span>
            </div>
        </a>
        <button id="sidebar-close" class="sidebar-close-btn" aria-label="Fermer">
            <i class="fa-solid fa-xmark"></i>
        </button>
    </div>

    <!-- User Info (if authenticated) -->
    {% if current_user.is_authenticated %}
    <div class="sidebar-user">
        <div class="sidebar-user-avatar gradient-primary">
            {{ current_user.profile.first_name[:1] if current_user.profile.first_name else 'U' }}
        </div>
        <div class="sidebar-user-info">
            <span class="sidebar-user-name">{{ current_user.profile.first_name }} {{ current_user.profile.last_name
                }}</span>
            <span class="sidebar-user-role">{{ current_user.role | capitalize }}</span>
        </div>
    </div>
    {% endif %}

    <!-- Navigation -->
    <nav class="sidebar-nav">
        <!-- Main Navigation -->
        <div class="sidebar-nav-section">
            <span class="sidebar-nav-title">Navigation</span>

            {% if current_user.is_authenticated %}
            {% for item in nav_items %}
            <a href="{{ item.url }}" class="sidebar-nav-item">
                <i class="fa-solid {{ item.icon }}"></i>
                <span>{{ item.name }}</span>
            </a>
            {% endfor %}
            {% else %}
            <a href="{{ url_for('main.index') }}" class="sidebar-nav-item">
                <i class="fa-solid fa-house"></i>
                <span>Accueil</span>
            </a>
            <a href="{{ url_for('main.feed') }}" class="sidebar-nav-item">
                <i class="fa-solid fa-newspaper"></i>
                <span>Actualités</span>
            </a>
            <a href="{{ url_for('main.public_club') }}" class="sidebar-nav-item">
                <i class="fa-solid fa-futbol"></i>
                <span>Clubs</span>
            </a>
            <a href="{{ url_for('main.ranking') }}" class="sidebar-nav-item">
                <i class="fa-solid fa-ranking-star"></i>
                <span>Classement</span>
            </a>
            {% endif %}
        </div>

        <!-- Coach/Manager Tools -->
        {% if current_user.is_authenticated and current_user.role in ['coach', 'manager', 'admin'] %}
        <div class="sidebar-nav-section">
            <span class="sidebar-nav-title">Outils Coach</span>
            <a href="{{ url_for('coach.tactical_board') }}" class="sidebar-nav-item">
                <i class="fa-solid fa-chalkboard"></i>
                <span>Tableau Tactique</span>
            </a>
            <a href="{{ url_for('coach.match_center') }}" class="sidebar-nav-item">
                <i class="fa-solid fa-stopwatch"></i>
                <span>Centre de Match</span>
            </a>
            <a href="{{ url_for('coach.create_event') }}" class="sidebar-nav-item">
                <i class="fa-solid fa-calendar-plus"></i>
                <span>Créer Événement</span>
            </a>
        </div>
        {% endif %}

        <!-- Admin Section -->
        {% if current_user.is_authenticated and current_user.role == 'admin' %}
        <div class="sidebar-nav-section">
            <span class="sidebar-nav-title">Administration</span>
            <a href="{{ url_for('admin.dashboard') }}" class="sidebar-nav-item">
                <i class="fa-solid fa-shield-halved"></i>
                <span>Admin Dashboard</span>
            </a>
            <a href="{{ url_for('admin.users') }}" class="sidebar-nav-item">
                <i class="fa-solid fa-users-gear"></i>
                <span>Gestion Utilisateurs</span>
            </a>
        </div>
        {% endif %}

        <!-- Account Section -->
        <div class="sidebar-nav-section">
            <span class="sidebar-nav-title">Mon Compte</span>

            {% if current_user.is_authenticated %}
            <a href="{{ url_for('main.profile') }}" class="sidebar-nav-item">
                <i class="fa-solid fa-user"></i>
                <span>Mon Profil</span>
            </a>
            <a href="{{ url_for('main.notifications') }}" class="sidebar-nav-item">
                <i class="fa-solid fa-bell"></i>
                <span>Notifications</span>
            </a>
            <a href="{{ url_for('main.settings') }}" class="sidebar-nav-item">
                <i class="fa-solid fa-gear"></i>
                <span>Paramètres</span>
            </a>
            {% endif %}

            <a href="{{ url_for('main.help') }}" class="sidebar-nav-item">
                <i class="fa-solid fa-circle-question"></i>
                <span>Aide</span>
            </a>
        </div>
    </nav>

    <!-- Sidebar Footer -->
    <div class="sidebar-footer">
        <!-- Theme Toggle -->
        <div class="sidebar-theme-toggle">
            <span class="sidebar-theme-label">Thème</span>
            <button id="sidebar-theme-toggle" class="theme-switch" aria-label="Changer le thème">
                <span class="theme-switch-track"></span>
                <span class="theme-switch-knob">
                    <i class="fa-solid fa-moon icon-dark"></i>
                    <i class="fa-solid fa-sun icon-light"></i>
                </span>
            </button>
        </div>

        {% if current_user.is_authenticated %}
        <a href="{{ url_for('auth.logout') }}" class="sidebar-logout">
            <i class="fa-solid fa-right-from-bracket"></i>
            <span>Déconnexion</span>
        </a>
        {% else %}
        <a href="{{ url_for('auth.login') }}" class="sidebar-login gradient-primary">
            <i class="fa-solid fa-right-to-bracket"></i>
            <span>Connexion</span>
        </a>
        {% endif %}
    </div>
</aside>